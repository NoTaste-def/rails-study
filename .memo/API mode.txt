[Rails API 정리]

  1.	Rails API란?

Rails API는 Ruby on Rails를 화면(View) 없이 백엔드 서버로만 사용하는 방식이다.
HTML을 렌더링하지 않고 JSON 데이터만 반환하는 서버로 동작한다.
주로 React, Vue, Next.js 같은 프론트엔드와 함께 사용된다.

⸻

	2.	API 모드로 Rails 프로젝트 생성

Rails를 API 전용으로 생성하려면 아래와 같이 실행한다.

rails new backend –api

–api 옵션을 사용하면 다음과 같은 특징이 있다.
	•	View 관련 파일 제거
	•	Asset Pipeline 제거
	•	세션 및 쿠키 기능 최소화
	•	JSON 응답 중심 구조
	•	ActionController::API 상속 구조

⸻

	3.	일반 Rails와의 차이점

일반 Rails
	•	MVC 구조
	•	View(ERB) 포함
	•	서버가 HTML을 직접 렌더링

Rails API
	•	Controller + Model 중심
	•	View 없음
	•	JSON 데이터 반환
	•	프론트엔드와 분리된 구조

⸻

	4.	기본 동작 흐름

클라이언트(React 등)
↓ HTTP 요청
Rails API 서버
↓
Controller 처리
↓
Model(DB 접근)
↓
JSON 응답 반환

⸻

	5.	컨트롤러 예시

class PostsController < ApplicationController
  def index
    posts = Post.all
    render json: posts
  end
end

render json: 를 사용해 데이터를 JSON 형태로 반환한다.

⸻

	6.	라우팅 예시

config/routes.rb

Rails.application.routes.draw do
  resources :posts
end

이렇게 하면 다음 API가 자동 생성된다.

GET    /posts
GET    /posts/:id
POST   /posts
PATCH  /posts/:id
DELETE /posts/:id

⸻

	7.	CORS 설정

프론트엔드와 포트가 다르면 CORS 설정이 필요하다.

config/initializers/cors.rb

Rails.application.config.middleware.insert_before 0, Rack::Cors do
  allow do
    origins “http://localhost:5173”
    resource “*”,
    headers: :any,
    methods: [:get, :post, :put, :patch, :delete, :options, :head]
  end
end

⸻

	8.	장점

	•	프론트엔드와 완전 분리 가능
	•	SPA 구조에 적합
	•	모바일 앱과도 쉽게 연동 가능
	•	RESTful 설계에 적합

⸻

	9.	자주 사용하는 기능

	•	인증: JWT, Devise
	•	직렬화: ActiveModel::Serializer, Jbuilder
	•	API 버저닝: namespace :api do … end
	•	Pagination: kaminari, pagy

⸻

	10.	전체 아키텍처 예시

React (Frontend)
↓ REST API 요청
Rails API Server
↓
PostgreSQL

⸻

요약

Rails API는 화면 렌더링 없이 JSON만 제공하는 백엔드 서버이다.
React 같은 프론트엔드와 함께 사용할 때 가장 일반적인 구조이다.
API 모드로 생성하고 CORS 설정을 반드시 해주어야 한다.